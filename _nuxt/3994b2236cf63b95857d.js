(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{2845:function(t,e,r){"use strict";r.r(e);r(42),r(74);var n=r(22),o=r(41),m=r.n(o),d={layout:"admin",data:function(){return{mode:"create",asset:{},assetRequest:{},form:{assetName:"",startDate:"",startTime:"",endDate:"",endTime:"",description:"",isFilled:!1,isValid:!1},show:!0}},created:function(){0!=this.$route.params.requestId&&(this.mode="edit"),this.getAsset()},methods:{getAsset:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.get(t.apiUrl("asset/list","&filtersArr[0][]=id|=|"+t.$route.params.id+"|god"));case 2:r=e.sent,t.asset=r.data.data[0],t.form.assetName=t.asset.Name,"edit"==t.mode&&t.getAssetRequest();case 6:case"end":return e.stop()}}),e)})))()},getAssetRequest:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.get(t.apiUrl("assetrequest/list","&filtersArr[0][]=ID|=|"+t.$route.params.requestId+"|god&inactive=true&filtersArr[0][]=status|<>|-1"));case 2:r=e.sent,t.assetRequest=r.data.data[0],n=t.assetRequest.StartAt.split("T"),t.form.startDate=n[0],t.form.startTime=n[1].split("+")[0],o=t.assetRequest.EndAt.split("T"),t.form.endDate=o[0],t.form.endTime=o[1].split("+")[0],t.form.description=t.assetRequest.Content,t.form.isFilled=!0,t.form.isValid=!0;case 13:case"end":return e.stop()}}),e)})))()},handle:function(t){if(this.form.startDate.length>0&&this.form.startTime.length>0&&this.form.endDate.length>0&&this.form.endTime.length>0){this.form.isFilled=!0;var e=new Date(this.form.startDate+" "+this.form.startTime),r=new Date(this.form.endDate+" "+this.form.endTime);this.form.isValid=e<r}else this.form.isFilled=!1,this.form.isValid=!1},onSubmit:function(t){var e=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t.preventDefault(),r.next=3,m.a.post(e.apiUrl("assetrequest","&token=mFBMhKjzCBYbQEFXCiz3BJs="),{place:e.asset.Name,Content:e.form.description,assetid:e.asset.ID,userid:e.getConfiguration().user.ID,StartAt:e.form.startDate+"T"+e.form.startTime,EndAt:e.form.endDate+"T"+e.form.endTime,action:e.mode,assetrequestidencrypt:e.assetRequest.IDEncrypt});case 3:n=r.sent,e.checkApiResponse(n.data,{onSuccess:function(){e.$router.push("/asset/"+e.asset.ID)}});case 5:case"end":return r.stop()}}),r)})))()},onReset:function(t){var e=this;t.preventDefault(),this.form.assetName=this.asset.Name,this.form.startDate="",this.form.startTime="",this.form.endDate="",this.form.endTime="",this.form.description="",this.form.isFilled=!1,this.form.isValid=!1,"edit"==this.mode&&(this.form.startDate=this.assetRequest.StartAt,this.form.startTime=this.assetRequest.StartAt,this.form.endDate=this.assetRequest.EndAt,this.form.endTime=this.assetRequest.EndAt,this.form.description=this.assetRequest.Content,this.form.isFilled=!0,this.form.isValid=!0),this.show=!1,this.$nextTick((function(){e.show=!0}))}}},f=r(12),component=Object(f.a)(d,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticStyle:{margin:"5vh auto","max-width":"90%",width:"800px"}},[t._m(0),t._v(" "),r("br"),t._v(" "),t.show?r("b-form",{attrs:{"pt-50":""},on:{submit:t.onSubmit,reset:t.onReset}},[r("b-form-group",{attrs:{id:"assetName-group",label:"Asset Name"}},[r("b-form-input",{attrs:{id:"assetName",readonly:"",required:""},model:{value:t.form.assetName,callback:function(e){t.$set(t.form,"assetName",e)},expression:"form.assetName"}})],1),t._v(" "),r("b-form-group",{attrs:{id:"date-time-group",label:""}},[r("b-form-group",{attrs:{id:"start-group",label:"Start"}},[r("b-row",[r("b-col",[r("b-form-input",{attrs:{id:"startDate",type:"date",required:""},on:{change:function(e){return t.handle()}},model:{value:t.form.startDate,callback:function(e){t.$set(t.form,"startDate",e)},expression:"form.startDate"}})],1),t._v(" "),r("b-col",[r("b-form-input",{attrs:{id:"startTime",type:"time",required:""},on:{change:function(e){return t.handle()}},model:{value:t.form.startTime,callback:function(e){t.$set(t.form,"startTime",e)},expression:"form.startTime"}})],1)],1)],1),t._v(" "),r("b-form-group",{attrs:{id:"end-group",label:"End"}},[r("b-row",[r("b-col",[r("b-form-input",{attrs:{id:"endDate",type:"date",required:""},on:{change:function(e){return t.handle()}},model:{value:t.form.endDate,callback:function(e){t.$set(t.form,"endDate",e)},expression:"form.endDate"}})],1),t._v(" "),r("b-col",[r("b-form-input",{attrs:{id:"endTime",type:"time",required:""},on:{change:function(e){return t.handle()}},model:{value:t.form.endTime,callback:function(e){t.$set(t.form,"endTime",e)},expression:"form.endTime"}})],1)],1)],1),t._v(" "),t.form.isFilled&&!t.form.isValid?r("b-form-text",[t._v("\n                Invalid Time.\n            ")]):t._e()],1),t._v(" "),r("b-form-group",{attrs:{id:"description-group",label:"Description"}},[r("b-form-textarea",{attrs:{id:"description"},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1),t._v(" "),r("b-button",{attrs:{type:"submit",variant:"primary",disabled:!t.form.isValid}},[t._v("Submit")])],1):t._e()],1)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticStyle:{"text-align":"center"}},[e("h1",[this._v("Create Asset Request")])])}],!1,null,null,null);e.default=component.exports}}]);