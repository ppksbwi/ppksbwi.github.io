(window.webpackJsonp=window.webpackJsonp||[]).push([[51],{2281:function(t,e,r){var content=r(2667);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(15).default)("30ba5401",content,!0,{sourceMap:!1})},2666:function(t,e,r){"use strict";var n=r(2281);r.n(n).a},2667:function(t,e,r){(e=r(14)(!1)).push([t.i,".actionBtn{width:100px;margin:5px 0}",""]),t.exports=e},2891:function(t,e,r){"use strict";r.r(e);r(74);var n=r(22),c=r(41),o=r.n(c),l={layout:"admin",data:function(){return{userID:null,asset:{},assetRequestList:[]}},created:function(){this.getAsset()},methods:{getAsset:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.get(t.apiUrl("asset/list","&filtersArr[0][]=id|=|"+t.$route.params.id+"|god"));case 2:r=e.sent,t.asset=r.data.data[0],t.getAssetRequestList();case 5:case"end":return e.stop()}}),e)})))()},getAssetRequestList:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.get(t.apiUrl("assetrequest/list","with[0]=Asset&with[1]=User.Circles&with[2]=Company&order=start_at-asc&filtersArr[0][]=asset_id|=|"+t.asset.ID+"|god&inactive=true&filtersArr[0][]=status|<>|-1"));case 2:r=e.sent,t.assetRequestList=r.data.data,t.userID=t.getConfiguration().user.ID,t.assetRequestList.map((function(e){e.Date=t.compareDateBetween(e.StartAt,e.EndAt),e.Time=t.timeBetween(e.StartAt,e.EndAt)}));case 6:case"end":return e.stop()}}),e)})))()},deleteItem:function(t){var e=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,o.a.delete(e.apiUrl("assetrequest/"+t));case 2:n=r.sent,e.checkApiResponse(n.data,{onSuccess:function(){e.getAssetRequestList()}});case 4:case"end":return r.stop()}}),r)})))()},approve:function(t){var e=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,o.a.patch(e.apiUrl("assetrequest/"+t,"GodMode=true"));case 2:n=r.sent,e.checkApiResponse(n.data,{onSuccess:function(){e.getAssetRequestList()}});case 4:case"end":return r.stop()}}),r)})))()},disapprove:function(t){var e=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,o.a.patch(e.apiUrl("disapproveassetrequest/"+t,"GodMode=true"));case 2:n=r.sent,e.checkApiResponse(n.data,{onSuccess:function(){e.getAssetRequestList()}});case 4:case"end":return r.stop()}}),r)})))()}}},v=(r(2666),r(12)),component=Object(v.a)(l,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticStyle:{margin:"5vh auto"}},[r("div",{staticStyle:{"text-align":"center"}},[r("h1",[t._v(t._s(t.asset.Name))])]),t._v(" "),r("br"),t._v(" "),r("b-list-group",t._l(t.assetRequestList,(function(e,n){return r("b-list-group-item",{key:n},[r("b-row",{staticStyle:{"text-align":"center"},attrs:{"align-v":"center"}},[r("b-col",[t._v(t._s(e.Date)),r("br"),t._v(t._s(e.Time))]),t._v(" "),r("b-col",[t._v(t._s(e.User.Name)),r("br"),r("b",[t._v(t._s(e.User.Circles))])]),t._v(" "),r("b-col",[t._v(t._s(e.Content))]),t._v(" "),r("b-col",[0==e.Status?r("span",{staticClass:"text-secondary"},[t._v(" Waiting ")]):1==e.Status?r("span",{staticClass:"text-danger"},[t._v(" Cancelled ")]):2==e.Status?r("span",{staticClass:"text-success"},[t._v(" Accepted ")]):t._e()]),t._v(" "),r("b-col",[1!=e.Status&&e.UserID==t.userID?r("div",[r("b-button",{staticClass:"actionBtn",attrs:{to:t.asset.ID+"/form/"+e.ID}},[t._v("Edit")]),t._v(" "),r("b-button",{staticClass:"actionBtn",on:{click:function(r){return t.deleteItem(e.ID)}}},[t._v("Delete")])],1):t._e(),t._v(" "),0==e.Status&&t.asset.UserID==t.userID?r("div",[r("b-button",{staticClass:"actionBtn",attrs:{variant:"success"},on:{click:function(r){return t.approve(e.ID)}}},[t._v("Approve")]),t._v(" "),r("b-button",{staticClass:"actionBtn",attrs:{variant:"danger"},on:{click:function(r){return t.disapprove(e.ID)}}},[t._v("Disapprove")])],1):t._e()])],1)],1)})),1),t._v(" "),r("div",{staticStyle:{"text-align":"center"}},[r("b-button",{staticClass:"actionBtn",attrs:{to:t.asset.ID+"/form/0",variant:"primary"}},[t._v("+ Create")])],1)],1)}),[],!1,null,null,null);e.default=component.exports}}]);